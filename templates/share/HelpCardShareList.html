{% extends "base.html" %}

{% block title %}ãƒ˜ãƒ«ãƒ—ã‚«ãƒ¼ãƒ‰å…±æœ‰ä¸€è¦§ - ErrorMate{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/share/helpcardshare.css') }}">
{% endblock %}

{% block content %}

<!-- ğŸ” ã‚¿ã‚°æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
<div class="d-flex align-items-center mb-4" style="justify-content:flex-start;">
    <form class="d-flex" method="get" action="{{ url_for('share.share_help_card_list') }}">
        <input
            type="text"
            id="tagInput"
            name="tag"
            class="form-control me-2"
            placeholder="ã‚¿ã‚°æ¤œç´¢æ¬„ï¼ˆè¤‡æ•°ã¯ã‚«ãƒ³ãƒ or ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šï¼‰"
            style="max-width:400px;font-size:1.2rem;"
            value="{{ keyword|e }}"
        >
        <button id="searchBtn" type="submit" class="btn btn-outline-primary" style="font-size:1.1rem;">ğŸ”</button>
    </form>
</div>

<!-- æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰è¡¨ç¤º -->
{% if keyword %}
<div class="mb-3">
    <h5>æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: ã€Œ{{ keyword|e }}ã€</h5>
</div>
{% endif %}

<!-- ã‚«ãƒ¼ãƒ‰ä¸€è¦§ -->
{% if matches %}
<div class="row">

    {% for card in matches %}
    <div class="col-md-4 mb-4">
        <div class="help-card p-3">

            <!-- ã‚¿ã‚¤ãƒˆãƒ« -->
            <h5 class="card-title text-center">{{ card.title }}</h5>
            
            <!-- æœ¬æ–‡ã‚¨ãƒªã‚¢ -->
            <div class="card-body">
                <div class="info-label">ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰:</div>
                <pre class="code-box">{{ card.error_code }}</pre>
                <div class="info-label">ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸:</div>
                <div class="text-box">{{ card.error_message }}</div>
            </div>

            <!-- ã‚¿ã‚° -->
            {% if card.tags %}
                {% for t in card.tags %}
                    #{{ t.tag_name }}ã€€
                {% endfor %}
            {% endif %}

            <!-- â¤ï¸ã„ã„ã­ + å›ç­”ãƒªãƒ³ã‚¯ -->
            <div class="d-flex justify-content-center align-items-center mt-3 actions">

                <!-- â¤ï¸ ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³ï¼ˆStepCard ã¨åŒå½¢å¼ï¼‰ -->
                <button class="like-btn me-3"
                        data-card="{{ card.card_id }}"
                        data-auth="{{ 1 if logged_in else 0 }}"
                        data-login="{{ url_for('auth.login') }}"
                        aria-pressed="{{ 'true' if card.card_id in liked_ids else 'false' }}"
                >
                    <span class="heart">{{ 'â™¥' if card.card_id in liked_ids else 'â™¡' }}</span>
                    <span class="like-count">{{ like_counts.get(card.card_id, 0) }}</span>
                </button>

                <!-- è©³ç´°/å›ç­” -->
                <a href="{{ url_for('share.share_help_card_detail', card_id=card.card_id) }}">
                    å›ç­”ã™ã‚‹
                </a>

            </div>

        </div>
    </div>
    {% endfor %}

</div>

{% else %}
<div class="alert alert-warning">è©²å½“ã™ã‚‹ã‚«ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</div>
{% endif %}

{% endblock %}
